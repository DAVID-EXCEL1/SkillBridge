<!-- Animated Background -->
<div class="signup-background">
    <div class="gradient-bg"></div>
    <div class="animated-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
    </div>
    <div class="dashboard-wrapper">
            <aside class="sidebar" [class.collapsed]="isSidebarCollapsed" [attr.aria-expanded]="!isSidebarCollapsed">
                <div class="sidebar-header">
                    <div class="brand">
                        <i class="fas fa-shield-alt"></i>
                        <span class="brand-text">Admin Panel</span>
                    </div>
                    <button class="toggle-btn" (click)="toggleSidebar()" [attr.aria-label]="isSidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'">
                                            @if (isSidebarCollapsed) { <i class="fas fa-chevron-right"></i> } @else { <i class="fas fa-chevron-left"></i> }
                                        </button>
                </div>
                <nav class="sidebar-nav">
                    <a class="nav-link" routerLink="/admin" >
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    <a class="nav-link" routerLink="/admin/categories" routerLinkActive="active">
                        <i class="fas fa-folder-open"></i>
                        <span>Categories</span>
                    </a>
                    <a class="nav-link active" routerLink="/admin/subcategories" routerLinkActive="active">
                        <i class="fas fa-layer-group"></i>
                        <span>Subcategories</span>
                    </a>
                    <a class="nav-link" routerLink="/admin/users" routerLinkActive="active">
                        <i class="fas fa-users"></i>
                        <span>Users</span>
                    </a>
                    <a class="nav-link" routerLink="/admin/services" routerLinkActive="active">
                        <i class="fas fa-concierge-bell"></i>
                        <span>Services</span>
                    </a>
                    <a class="nav-link" routerLink="/admin/settings" routerLinkActive="active">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </nav>
                <div class="sidebar-footer">
                    <button class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </button>
                </div>
            </aside>
            <main class="main-content">
                <div class="subcategories-page">
                    <div class="subcategories-container">
                        <div class="page-header fade-in-up white-panel">
                            <div class="header-icon bounce">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div class="header-text">
                                <h1 class="gradient-text">Subcategories</h1>
                                <p class="subtitle">Manage and organize nested service groupings</p>
                            </div>
                        </div>
                        <div class="content-panel fade-in-up">
                            <div class="card-header">
                                <h2 class="section-title">Existing Subcategories</h2>
                                <div class="actions">
                                    <button class="btn-clear">
                                        <i class="fas fa-sync-alt"></i>
                                        Refresh
                                    </button>
                                    <button class="btn-gradient">
                                        <i class="fas fa-plus-circle"></i>
                                        New Subcategory
                                    </button>
                                </div>
                            </div>
                            <div class="chips">
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Plumbing Essentials
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Creative Design Assets
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Electrical Advanced
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Outdoor Living
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    UX Enhancements
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Safety & Compliance
                                </div>
                                <div class="chip glow">
                                    <i class="fas fa-tag"></i>
                                    Premium Materials
                                </div>
                            </div>
                        </div>
                        <div class="content-panel fade-in-up">
                            <h2 class="section-title">Add Subcategory</h2>
                            <form novalidate>
                                <div class="form-row">
                                    <div class="input-wrapper">
                                        <label for="parentCat">Parent Category</label>
                                        <div class="input-icon">
                                            <i class="fas fa-sitemap"></i>
                                        </div>
                                        <select id="parentCat" [(ngModel)]="category_id" name="parentCat">
                                            <option selected disabled>Select a category</option>
                                            @for (item of categories; track $index) {
                                                <option value="{{item[0]}}">{{item[1]}}</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="input-wrapper">
                                        <label for="subcatName">Subcategory Name</label>
                                        <div class="input-icon">
                                            <i class="fas fa-heading"></i>
                                        </div>
                                        <input id="subcatName" type="text" placeholder="e.g., Plumbing Basics" (change)="add($event)" name="subcatName">
                                    </div>
                                </div>
                                <div class="chips" *ngIf="added_items?.length">
                                    @for (tag of added_items; track $index) {
                                        <div class="chip glow">
                                            <i class="fas fa-tag"></i>
                                            {{tag}}
                                        </div>
                                    }
                                </div>
                                <div class="actions">
                                    <button type="reset" class="btn-clear">
                                        <i class="fas fa-times"></i>
                                        Clear
                                    </button>
                                    <button type="button" class="btn-gradient" (click)="addSubCategories()">
                                        <i class="fas fa-save"></i>
                                        Save Subcategories
                                    </button>
                                </div>
                                <p class="form-hint" *ngIf="message">{{message}}</p>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>