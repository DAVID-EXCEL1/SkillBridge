<!-- Animated Background -->
<div class="signup-background">
	<div class="gradient-bg"></div>
	<div class="animated-shapes">
		<div class="shape shape-1"></div>
		<div class="shape shape-2"></div>
		<div class="shape shape-3"></div>
		<div class="shape shape-4"></div>
		<div class="shape shape-5"></div>
	</div>
</div>

<div class="signup-container">
	<div class="container">
		<div class="row align-items-center justify-content-center min-vh-100">
			<div class="col-lg-6 col-md-8 col-sm-10">
				<div class="signup-card fade-in-up">
					<div class="card-glow"></div>
					<div class="card-header-custom">
						<div class="icon-wrapper">
							<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
								<path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m7-3a3 3 0 1 1-6 0 3 3 0 0 1 6 0M4.5 14a.5.5 0 0 1-.5-.5c0-.537.12-1.318.466-2.063.175-.376.394-.739.654-1.063C5.806 9.575 6.92 9 8 9s2.194.575 2.88 1.374c.26.324.48.687.654 1.063.346.745.466 1.526.466 2.063a.5.5 0 0 1-.5.5z"/>
							</svg>
						</div>
						<h4 class="signup-title">Admin Registration</h4>
						<p class="signup-subtitle">Create a new administrator account</p>
					</div>

					<form [formGroup]="adminSignupForm" (ngSubmit)="submit()" class="signup-form" novalidate>
						<!-- Alert Message -->
						<div *ngIf="message" class="alert-modern alert-{{ messageType || 'danger' }}" role="alert">
							<div class="alert-content">
								<i class="bi" [ngClass]="{
									'bi-check-circle-fill': messageType === 'success',
									'bi-exclamation-triangle-fill': messageType === 'warning',
									'bi-info-circle-fill': messageType === 'info',
									'bi-x-circle-fill': messageType === 'danger'
								}"></i>
								<div>
									<h6 *ngIf="messageTitle" class="alert-title">{{ messageTitle }}</h6>
									<p class="alert-message">{{ message }}</p>
								</div>
							</div>
							<button type="button" class="alert-close" aria-label="Close" (click)="closeMessage()">
								<i class="bi bi-x"></i>
							</button>
						</div>

						<!-- Name Row -->
						<div class="row g-3">
							<div class="col-md-6 form-group">
								<label class="form-label"><i class="bi bi-person"></i> First Name</label>
								<div class="input-wrapper">
									<input type="text" class="form-control" formControlName="first_name" placeholder="Jane"
										[class.is-invalid]="hasError('first_name')" [class.is-valid]="isValid('first_name')">
									<span class="input-icon"><i class="bi bi-person"></i></span>
								</div>
								<div *ngIf="hasError('first_name')" class="error-message">
									<i class="bi bi-exclamation-circle"></i>
									<span *ngIf="adminSignupForm.get('first_name')?.hasError('required')">First name is required</span>
									<span *ngIf="adminSignupForm.get('first_name')?.hasError('minlength')">Min 2 characters</span>
								</div>
							</div>
							<div class="col-md-6 form-group">
								<label class="form-label"><i class="bi bi-person"></i> Last Name</label>
								<div class="input-wrapper">
									<input type="text" class="form-control" formControlName="last_name" placeholder="Doe"
										[class.is-invalid]="hasError('last_name')" [class.is-valid]="isValid('last_name')">
									<span class="input-icon"><i class="bi bi-person"></i></span>
								</div>
								<div *ngIf="hasError('last_name')" class="error-message">
									<i class="bi bi-exclamation-circle"></i>
									<span *ngIf="adminSignupForm.get('last_name')?.hasError('required')">Last name is required</span>
									<span *ngIf="adminSignupForm.get('last_name')?.hasError('minlength')">Min 2 characters</span>
								</div>
							</div>
						</div>

						<!-- Email -->
						<div class="form-group">
							<label class="form-label"><i class="bi bi-envelope"></i> Email Address</label>
							<div class="input-wrapper">
								<input type="email" class="form-control" formControlName="email" placeholder="admin@example.com"
									[class.is-invalid]="hasError('email')" [class.is-valid]="isValid('email')">
								<span class="input-icon"><i class="bi bi-envelope"></i></span>
							</div>
							<div *ngIf="hasError('email')" class="error-message">
								<i class="bi bi-exclamation-circle"></i>
								<span *ngIf="adminSignupForm.get('email')?.hasError('required')">Email is required</span>
								<span *ngIf="adminSignupForm.get('email')?.hasError('email')">Enter a valid email</span>
							</div>
						</div>

						<!-- Role -->
						<div class="form-group">
							<label class="form-label"><i class="bi bi-shield-lock"></i> Role</label>
							<div class="input-wrapper">
								<select class="form-control" formControlName="role" [class.is-invalid]="hasError('role')" [class.is-valid]="isValid('role')">
									<option value="" disabled selected>Select role</option>
									<option value="superadmin">Super Admin</option>
									<option value="manager">Manager</option>
									<option value="support">Support</option>
								</select>
								<span class="input-icon"><i class="bi bi-shield-lock"></i></span>
							</div>
							<div *ngIf="hasError('role')" class="error-message">
								<i class="bi bi-exclamation-circle"></i>
								<span *ngIf="adminSignupForm.get('role')?.hasError('required')">Role is required</span>
							</div>
						</div>

						<!-- Password -->
						<div class="form-group">
							<label class="form-label"><i class="bi bi-lock"></i> Password</label>
							<div class="input-wrapper">
								<input [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password" placeholder="Create password"
									[class.is-invalid]="hasError('password')" [class.is-valid]="isValid('password')">
								<span class="input-icon"><i class="bi bi-lock"></i></span>
								<button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
									<i class="bi" [class.bi-eye]="!showPassword" [class.bi-eye-slash]="showPassword"></i>
								</button>
							</div>
							<div *ngIf="hasError('password')" class="error-message">
								<i class="bi bi-exclamation-circle"></i>
								<span *ngIf="adminSignupForm.get('password')?.hasError('required')">Password is required</span>
								<span *ngIf="adminSignupForm.get('password')?.hasError('minlength')">Min 6 characters</span>
							</div>
						</div>

						<!-- Confirm Password -->
						<div class="form-group">
							<label class="form-label"><i class="bi bi-lock-fill"></i> Confirm Password</label>
							<div class="input-wrapper">
								<input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" formControlName="confirm_password" placeholder="Repeat password"
									[class.is-invalid]="hasError('confirm_password')" [class.is-valid]="isValid('confirm_password')">
								<span class="input-icon"><i class="bi bi-lock-fill"></i></span>
								<button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
									<i class="bi" [class.bi-eye]="!showConfirmPassword" [class.bi-eye-slash]="showConfirmPassword"></i>
								</button>
							</div>
							<div *ngIf="hasError('confirm_password')" class="error-message">
								<i class="bi bi-exclamation-circle"></i>
								<span *ngIf="adminSignupForm.get('confirm_password')?.hasError('required')">Confirmation is required</span>
								<span *ngIf="adminSignupForm.get('confirm_password')?.hasError('mismatch')">Passwords must match</span>
							</div>
						</div>

						<!-- Submit Button -->
						<button type="submit" class="btn-submit" [disabled]="!adminSignupForm.valid || loading">
							<span *ngIf="!loading"><i class="bi bi-person-plus me-2"></i> Create Account</span>
							<span *ngIf="loading" class="spinner-wrapper"><span class="spinner"></span> Processing...</span>
						</button>

						<!-- Links -->
						<div class="form-links">
							<p class="link-text">Already have admin access? <a routerLink="/admin-signin" class="link-primary">Sign in</a></p>
							<p class="link-text">Return to dashboard? <a routerLink="/" class="link-secondary">Go back</a></p>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

